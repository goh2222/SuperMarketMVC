<%- include('partials/header', { pageTitle: 'Edit User - Jeffery Market' }) %>

  <div class="container mt-4">
    <h2>Edit User</h2>
    <% if (messages && messages.error && messages.error.length) { %>
      <div class="alert alert-danger"><%= messages.error.join('<br/>') %></div>
    <% } %>
    <% if (messages && messages.success && messages.success.length) { %>
      <div class="alert alert-success"><%= messages.success.join('<br/>') %></div>
    <% } %>

    <form method="post" action="/admin/users/<%= userRow.id %>">
      <div class="mb-3">
        <label class="form-label">Username</label>
        <input name="username" class="form-control" value="<%= userRow.username || '' %>" required />
      </div>
      <div class="mb-3">
        <label class="form-label">Email</label>
        <input name="email" class="form-control" type="email" value="<%= userRow.email || '' %>" required />
      </div>
      <div class="mb-3">
        <label class="form-label">Role</label>
        <select name="role" class="form-select">
          <option value="user" <%= (userRow.role === 'user') ? 'selected' : '' %>>User</option>
          <option value="admin" <%= (userRow.role === 'admin') ? 'selected' : '' %>>Admin</option>
        </select>
      </div>
      <div class="mb-3">
        <label class="form-label">Address</label>
        <textarea name="address" class="form-control"><%= userRow.address || '' %></textarea>
      </div>
      <div class="mb-3">
        <label class="form-label">Contact</label>
        <input name="contact" class="form-control" value="<%= userRow.contact || '' %>" />
      </div>
      <button class="btn btn-primary">Save</button>
      <a class="btn btn-secondary ms-2" href="/admin/users">Cancel</a>
    </form>
  </div>

<%- include('partials/footer') %>
